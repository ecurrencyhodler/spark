mutation RequestLeavesSwap(
    $adaptor_pubkey: PublicKey!
    $total_amount_sats: Long!
    $target_amount_sats: Long!
    $fee_sats: Long!
    $user_leaves: [UserLeafInput!]!
    $idempotency_key: String!
) {
    request_leaves_swap(input: {
        adaptor_pubkey: $adaptor_pubkey
        total_amount_sats: $total_amount_sats
        target_amount_sats: $target_amount_sats
        idempotency_key: $idempotency_key
        fee_sats: $fee_sats
        user_leaves: $user_leaves
    }) {
        request {
            id
            swap_leaves {
                leaf_id
                raw_unsigned_refund_transaction
                adaptor_signed_signature
            }
        }
    }
}

mutation CompleteLeavesSwap(
    $adaptor_secret_key: String!
    $user_outbound_transfer_external_id: UUID!
    $leaves_swap_request_id: ID!
) {
    complete_leaves_swap(input: {
        adaptor_secret_key: $adaptor_secret_key
        user_outbound_transfer_external_id: $user_outbound_transfer_external_id
        leaves_swap_request_id: $leaves_swap_request_id
    }) {
        request {
            id
        }
    }
}